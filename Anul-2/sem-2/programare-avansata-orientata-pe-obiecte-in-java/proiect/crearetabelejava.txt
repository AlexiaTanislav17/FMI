CREATE DATABASE magazin_plante;

\c magazin_plante

CREATE TABLE plante (
    id SERIAL PRIMARY KEY,
    nume VARCHAR(100) NOT NULL,
    pret DECIMAL(10,2) NOT NULL,
    tip VARCHAR(20) NOT NULL,
    specificatii VARCHAR(100)
);

CREATE TABLE utilizatori (
    id SERIAL PRIMARY KEY,
    nume VARCHAR(100) NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    parola VARCHAR(100) NOT NULL
);

CREATE TABLE comenzi (
    id SERIAL PRIMARY KEY,
    utilizator_id INTEGER REFERENCES utilizatori(id),
    data_comanda TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    adresa_strada VARCHAR(200),
    adresa_oras VARCHAR(100),
    adresa_cod_postal VARCHAR(20)
);

CREATE TABLE comenzi_produse (
    comanda_id INTEGER REFERENCES comenzi(id),
    planta_id INTEGER REFERENCES plante(id),
    PRIMARY KEY (comanda_id, planta_id)
);
















-------------------------

CREATE DATABASE MagazinPlante;

CREATE TABLE plante (
    id INT PRIMARY KEY,
    nume VARCHAR(255) NOT NULL,
    pret DECIMAL(10, 2) NOT NULL,
    tip VARCHAR(50) NOT NULL,
    specificatii VARCHAR(255)
);

CREATE TABLE utilizatori (
    id SERIAL PRIMARY KEY,
    nume VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL UNIQUE,
    parola VARCHAR(255) NOT NULL
);

CREATE TABLE adrese (
    id SERIAL PRIMARY KEY,
    strada VARCHAR(255) NOT NULL,
    oras VARCHAR(255) NOT NULL,
    cod_postal VARCHAR(20) NOT NULL
);

CREATE TABLE comenzi (
    id SERIAL PRIMARY KEY,
    id_utilizator INT NOT NULL,
    id_adresa INT NOT NULL,
    data_comanda TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (id_utilizator) REFERENCES utilizatori(id),
    FOREIGN KEY (id_adresa) REFERENCES adrese(id)
);

CREATE TABLE comenzi_produse (
    id SERIAL PRIMARY KEY,
    id_comanda INT NOT NULL,
    id_planta INT NOT NULL,
    FOREIGN KEY (id_comanda) REFERENCES comenzi(id),
    FOREIGN KEY (id_planta) REFERENCES plante(id)
);


-----------------------------------


CREATE TABLE plante (
    id INT PRIMARY KEY,
    nume VARCHAR(255) NOT NULL,
    pret DECIMAL(10, 2) NOT NULL,
    tip VARCHAR(50) NOT NULL,
    specificatii VARCHAR(255)
);

CREATE TABLE utilizatori (
    id SERIAL PRIMARY KEY,
    nume VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL UNIQUE,
    parola VARCHAR(255) NOT NULL
);


CREATE TABLE adrese (
    cod_postal VARCHAR(20) PRIMARY KEY,
    strada VARCHAR(255) NOT NULL,
    oras VARCHAR(255) NOT NULL
);


CREATE TABLE comenzi (
    id SERIAL PRIMARY KEY,
    nume_utilizator VARCHAR(255) NOT NULL,
    cod_postal VARCHAR(20) NOT NULL,
    data_comanda TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (cod_postal) REFERENCES adrese(cod_postal)
);


CREATE TABLE comenzi_produse (
    id SERIAL PRIMARY KEY,
    id_comanda INT NOT NULL,
    id_planta INT NOT NULL,
    FOREIGN KEY (id_comanda) REFERENCES comenzi(id),
    FOREIGN KEY (id_planta) REFERENCES plante(id)
);









